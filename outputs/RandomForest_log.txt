============================================================
I. LOAD Dá»® LIá»†U & CHUáº¨N Bá»Š
============================================================
 ÄÃ£ load dá»¯ liá»‡u: Train (734, 17), Test (184, 17)

============================================================
II. HUáº¤N LUYá»†N & HYPERPARAMETER TUNING (GRID SEARCH)
============================================================
 Äang tÃ¬m kiáº¿m hyperparameters tá»‘t nháº¥t...

 HoÃ n thÃ nh Grid Search!
   Best Params: {'max_depth': 15, 'min_samples_leaf': 2, 'n_estimators': 200}
   Best Recall (CV): 0.8966

============================================================
III. Tá»I Æ¯U NGÆ¯á» NG Dá»° ÄOÃN (THRESHOLD TUNING)
============================================================
 NgÆ°á»¡ng tá»‘i Æ°u: 0.5491
   â†’ Precision=0.8661 | Recall=0.9510

============================================================
Káº¾T QUáº¢ TRÃŠN Táº¬P TEST
============================================================
              precision    recall  f1-score   support

        Khá»e     0.9306    0.8171    0.8701        82
        Bá»‡nh     0.8661    0.9510    0.9065       102

    accuracy                         0.8913       184
   macro avg     0.8983    0.8840    0.8883       184
weighted avg     0.8948    0.8913    0.8903       184


 AUC-ROC Score: 0.9232

 Confusion Matrix:
   - True Negatives (TN): 67 (Dá»± Ä‘oÃ¡n Ä‘Ãºng ngÆ°á»i khá»e)
   - False Positives (FP): 15 (Dá»± Ä‘oÃ¡n nháº§m ngÆ°á»i khá»e thÃ nh bá»‡nh)
   - False Negatives (FN): 5  (Bá» SÃ“T ngÆ°á»i bá»‡nh - quan trá»ng!)
   - True Positives (TP): 97 (Dá»± Ä‘oÃ¡n Ä‘Ãºng ngÆ°á»i bá»‡nh)

============================================================
IV. Táº O BIá»‚U Äá»’ ÄÃNH GIÃ
============================================================
   ÄÃ£ lÆ°u: RF_ROC.png
   ÄÃ£ lÆ°u: RF_Confusion_Matrix.png

============================================================
V. PHÃ‚N TÃCH Äá»˜ QUAN TRá»ŒNG Äáº¶C TRÆ¯NG (PERMUTATION)
============================================================
ğŸ”¬ Äang tÃ­nh toÃ¡n Permutation Importance...

 Top 10 Ä‘áº·c trÆ°ng áº£nh hÆ°á»Ÿng nháº¥t:
   1. Äá»™_Dá»‘c_ST_Up              â†’ 0.0467
   2. Äá»™_ChÃªnh_ST               â†’ 0.0283
   3. Äá»™_Dá»‘c_ST_Flat            â†’ 0.0152
   4. Äau_Tháº¯t_Váº­n_Äá»™ng         â†’ 0.0141
   5. ÄÆ°á»ng_Huyáº¿t_ÄÃ³i           â†’ 0.0125
   6. Cholesterol               â†’ 0.0076
   7. Giá»›i_tÃ­nh                 â†’ 0.0076
   8. Tuá»•i                      â†’ 0.0071
   9. Nhá»‹p_Tim_Tá»‘i_Äa           â†’ 0.0065
   10. Loáº¡i_Äau_Ngá»±c_ATA         â†’ 0.0065
    ÄÃ£ lÆ°u: RF_Permutation_Importance.png

============================================================
VI. TRÃCH XUáº¤T LUáº¬T Tá»ª CÃ‚Y QUYáº¾T Äá»ŠNH Äáº I DIá»†N
============================================================

 Luáº­t quyáº¿t Ä‘á»‹nh (5 táº§ng Ä‘áº§u):
|--- Nhá»‹p_Tim_Tá»‘i_Äa <= -0.21
|   |--- Äá»™_Dá»‘c_ST_Flat <= 0.50
|   |   |--- Äau_Tháº¯t_Váº­n_Äá»™ng <= 0.50
|   |   |   |--- Äá»™_Dá»‘c_ST_Up <= 0.50
|   |   |   |   |--- class: 1.0
|   |   |   |--- Äá»™_Dá»‘c_ST_Up >  0.50
|   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ <= -0.18
|   |   |   |   |   |--- Äá»™_ChÃªnh_ST <= -0.23
|   |   |   |   |   |   |--- class: 0.0
|   |   |   |   |   |--- Äá»™_ChÃªnh_ST >  -0.23
|   |   |   |   |   |   |--- truncated branch of depth 2
|   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ >  -0.18
|   |   |   |   |   |--- Giá»›i_tÃ­nh <= 0.50
|   |   |   |   |   |   |--- truncated branch of depth 2
|   |   |   |   |   |--- Giá»›i_tÃ­nh >  0.50
|   |   |   |   |   |   |--- truncated branch of depth 2
|   |   |--- Äau_Tháº¯t_Váº­n_Äá»™ng >  0.50
|   |   |   |--- Tuá»•i <= -0.50
|   |   |   |   |--- Cholesterol_Tuoi <= 1.01
|   |   |   |   |   |--- class: 0.0
|   |   |   |   |--- Cholesterol_Tuoi >  1.01
|   |   |   |   |   |--- class: 0.0
|   |   |   |--- Tuá»•i >  -0.50
|   |   |   |   |--- Äá»™_ChÃªnh_ST <= -0.03
|   |   |   |   |   |--- class: 1.0
|   |   |   |   |--- Äá»™_ChÃªnh_ST >  -0.03
|   |   |   |   |   |--- Cholesterol_Tuoi <= -0.23
|   |   |   |   |   |   |--- class: 1.0
|   |   |   |   |   |--- Cholesterol_Tuoi >  -0.23
|   |   |   |   |   |   |--- truncated branch of depth 2
|   |--- Äá»™_Dá»‘c_ST_Flat >  0.50
|   |   |--- Äiá»‡n_TÃ¢m_Äá»“_ST <= 0.50
|   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_Normal <= 0.50
|   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ <= -1.20
|   |   |   |   |   |--- class: 0.0
|   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ >  -1.20
|   |   |   |   |   |--- Äau_Tháº¯t_Váº­n_Äá»™ng <= 0.50
|   |   |   |   |   |   |--- truncated branch of depth 2
|   |   |   |   |   |--- Äau_Tháº¯t_Váº­n_Äá»™ng >  0.50
|   |   |   |   |   |   |--- class: 1.0
|   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_Normal >  0.50
|   |   |   |   |--- Giá»›i_tÃ­nh <= 0.50
|   |   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ <= 0.20
|   |   |   |   |   |   |--- truncated branch of depth 2
|   |   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ >  0.20
|   |   |   |   |   |   |--- truncated branch of depth 2
|   |   |   |   |--- Giá»›i_tÃ­nh >  0.50
|   |   |   |   |   |--- Cholesterol_Tuoi <= -0.15
|   |   |   |   |   |   |--- truncated branch of depth 3
|   |   |   |   |   |--- Cholesterol_Tuoi >  -0.15
|   |   |   |   |   |   |--- class: 1.0
|   |   |--- Äiá»‡n_TÃ¢m_Äá»“_ST >  0.50
|   |   |   |--- Cholesterol_Tuoi <= -0.63
|   |   |   |   |--- Cholesterol <= -0.34
|   |   |   |   |   |--- class: 1.0
|   |   |   |   |--- Cholesterol >  -0.34
|   |   |   |   |   |--- class: 0.0
|   |   |   |--- Cholesterol_Tuoi >  -0.63
|   |   |   |   |--- class: 1.0
|--- Nhá»‹p_Tim_Tá»‘i_Äa >  -0.21
|   |--- Äá»™_Dá»‘c_ST_Up <= 0.50
|   |   |--- Äá»™_ChÃªnh_ST <= 1.17
|   |   |   |--- Äá»™_ChÃªnh_ST <= -0.30
|   |   |   |   |--- Cholesterol <= 0.42
|   |   |   |   |   |--- Tuá»•i <= 0.19
|   |   |   |   |   |   |--- truncated branch of depth 4
|   |   |   |   |   |--- Tuá»•i >  0.19
|   |   |   |   |   |   |--- class: 1.0
|   |   |   |   |--- Cholesterol >  0.42
|   |   |   |   |   |--- Cholesterol <= 0.69
|   |   |   |   |   |   |--- class: 0.0
|   |   |   |   |   |--- Cholesterol >  0.69
|   |   |   |   |   |   |--- class: 1.0
|   |   |   |--- Äá»™_ChÃªnh_ST >  -0.30
|   |   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_ST <= 0.50
|   |   |   |   |   |--- Cholesterol <= -0.22
|   |   |   |   |   |   |--- truncated branch of depth 4
|   |   |   |   |   |--- Cholesterol >  -0.22
|   |   |   |   |   |   |--- truncated branch of depth 5
|   |   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_ST >  0.50
|   |   |   |   |   |--- ÄÆ°á»ng_Huyáº¿t_ÄÃ³i <= 0.50
|   |   |   |   |   |   |--- class: 1.0
|   |   |   |   |   |--- ÄÆ°á»ng_Huyáº¿t_ÄÃ³i >  0.50
|   |   |   |   |   |   |--- class: 1.0
|   |   |--- Äá»™_ChÃªnh_ST >  1.17
|   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_ST <= 0.50
|   |   |   |   |--- NguyCo_TimMach_RatCao <= 0.50
|   |   |   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_Normal <= 0.50
|   |   |   |   |   |   |--- truncated branch of depth 2
|   |   |   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_Normal >  0.50
|   |   |   |   |   |   |--- class: 1.0
|   |   |   |   |--- NguyCo_TimMach_RatCao >  0.50
|   |   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ <= 1.70
|   |   |   |   |   |   |--- class: 1.0
|   |   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ >  1.70
|   |   |   |   |   |   |--- class: 0.0
|   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_ST >  0.50
|   |   |   |   |--- class: 0.0
|   |--- Äá»™_Dá»‘c_ST_Up >  0.50
|   |   |--- Giá»›i_tÃ­nh <= 0.50
|   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ <= -1.18
|   |   |   |   |--- Tuá»•i <= -1.08
|   |   |   |   |   |--- class: 1.0
|   |   |   |   |--- Tuá»•i >  -1.08
|   |   |   |   |   |--- class: 0.0
|   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ >  -1.18
|   |   |   |   |--- Tuá»•i <= 0.38
|   |   |   |   |   |--- class: 0.0
|   |   |   |   |--- Tuá»•i >  0.38
|   |   |   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_Normal <= 0.50
|   |   |   |   |   |   |--- class: 1.0
|   |   |   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_Normal >  0.50
|   |   |   |   |   |   |--- class: 0.0
|   |   |--- Giá»›i_tÃ­nh >  0.50
|   |   |   |--- Loáº¡i_Äau_Ngá»±c_ATA <= 0.50
|   |   |   |   |--- Cholesterol <= -0.25
|   |   |   |   |   |--- Tuá»•i <= 0.27
|   |   |   |   |   |   |--- truncated branch of depth 4
|   |   |   |   |   |--- Tuá»•i >  0.27
|   |   |   |   |   |   |--- truncated branch of depth 3
|   |   |   |   |--- Cholesterol >  -0.25
|   |   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ <= 0.05
|   |   |   |   |   |   |--- truncated branch of depth 5
|   |   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ >  0.05
|   |   |   |   |   |   |--- truncated branch of depth 3
|   |   |   |--- Loáº¡i_Äau_Ngá»±c_ATA >  0.50
|   |   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_Normal <= 0.50
|   |   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ <= 0.85
|   |   |   |   |   |   |--- class: 0.0
|   |   |   |   |   |--- Huyáº¿t_Ãp_Nghá»‰ >  0.85
|   |   |   |   |   |   |--- class: 1.0
|   |   |   |   |--- Äiá»‡n_TÃ¢m_Äá»“_Normal >  0.50
|   |   |   |   |   |--- Nhá»‹p_Tim_Tá»‘i_Äa <= 0.14
|   |   |   |   |   |   |--- class: 0.0
|   |   |   |   |   |--- Nhá»‹p_Tim_Tá»‘i_Äa >  0.14
|   |   |   |   |   |   |--- class: 0.0


 Äang táº¡o biá»ƒu Ä‘á»“ cÃ¢y quyáº¿t Ä‘á»‹nh...
    ÄÃ£ lÆ°u: RF_Decision_Tree.png

============================================================
VII. PHÃT HIá»†N MáºªU áº¨N (HIDDEN PATTERNS)
============================================================
 TrÃ­ch xuáº¥t cÃ¡c quy luáº­t: Triá»‡u chá»©ng A + B + C â†’ Bá»‡nh Tim

 Dang trich xuat quy luat tu 50 cay trong Random Forest...
 Trich xuat duoc 89 quy luat benh tim tu 50 cay
 Hien thi 5 mau dai dien (3 cao nhat + 2 thap nhat):

1. NEU:
      + Äá»™_Dá»‘c_ST_Up <= 0.50
      + Giá»›i_tÃ­nh > 0.50
      + Äá»™_ChÃªnh_ST <= -0.30
   â†’ KET LUAN: Nguy co benh tim Rat cao (100%)
   â†’ Can cu: 51 benh nhan trong tap huan luyen


2. NEU:
      + Äá»™_ChÃªnh_ST > -0.03
      + Äá»™_ChÃªnh_ST > 1.23
      + Huyáº¿t_Ãp_Nghá»‰ > -1.27
   â†’ KET LUAN: Nguy co benh tim Rat cao (100%)
   â†’ Can cu: 44 benh nhan trong tap huan luyen


3. NEU:
      + Äá»™_Dá»‘c_ST_Flat > 0.50
      + Loáº¡i_Äau_Ngá»±c_NAP <= 0.50
      + ÄÆ°á»ng_Huyáº¿t_ÄÃ³i > 0.50
      + Äá»™_ChÃªnh_ST <= 0.93
   â†’ KET LUAN: Nguy co benh tim Rat cao (100%)
   â†’ Can cu: 44 benh nhan trong tap huan luyen


4. NEU:
      + Loáº¡i_Äau_Ngá»±c_NAP > 0.50
      + Äau_Tháº¯t_Váº­n_Äá»™ng > 0.50
      + Nhá»‹p_Tim_Tá»‘i_Äa <= 0.36
      + Huyáº¿t_Ãp_Nghá»‰ <= -0.88
   â†’ KET LUAN: Nguy co benh tim Trung binh (33%)
   â†’ Can cu: 3 benh nhan trong tap huan luyen


5. NEU:
      + Äau_Tháº¯t_Váº­n_Äá»™ng > 0.50
      + Loáº¡i_Äau_Ngá»±c_TA > 0.50
   â†’ KET LUAN: Nguy co benh tim Trung binh (40%)
   â†’ Can cu: 3 benh nhan trong tap huan luyen



============================================================
VIII. LUU MO HINH
============================================================
 ÄÃ£ lÆ°u mÃ´ hÃ¬nh Random Forest: random_forest.pkl
 ÄÃ£ lÆ°u metadata: rf_metadata.pkl

============================================================
 HOÃ€N THÃ€NH!
============================================================
 TÃ³m táº¯t káº¿t quáº£:
   - NgÆ°á»¡ng tá»‘i Æ°u: 0.5491
   - Test Accuracy: 0.8913
   - Test Recall: 0.9510
   - AUC-ROC: 0.9232
   - False Negatives: 5 (Bá» sÃ³t 5 bá»‡nh nhÃ¢n)

 CÃ¡c file output Ä‘Ã£ Ä‘Æ°á»£c lÆ°u táº¡i: d:\Dataset\Machine_Learning\S26-65TTNT_Nhom7_DuDoanBenhTim\src\../outputs/figures
 File log Ä‘Ã£ Ä‘Æ°á»£c lÆ°u táº¡i: d:\Dataset\Machine_Learning\S26-65TTNT_Nhom7_DuDoanBenhTim\src\../outputs\RandomForest_log.txt
